# 4  产品部署
更新时间 {docsify-updated}<br />
<a name="MBI00"></a>

<!-- ## 4.1  部署架构说明

聆鉴产品的部署主要由五部分组成，逻辑架构如下：<br />![](<../../assets/images/(385).png#height=277&width=415>)[[优化4]](commonProblem/#优化4)<br />Ø  **负载均衡服务**：对客户的服务请求进行转发，支撑标签库应用与接口服务应用实现高可用，可采用软负载或者硬负载的方式，产品默认采用 Ngnix 软负载方式，需要申请相应的服务器，同时也可以直接使用企业内部的负载服务或者硬负载(F5)。在单机模式下不需要部署该服务。<br />Ø  **标签库应用与接口服务**：为客户提供聆鉴产品的 WEB 应用与接口服务，支撑线性扩展，按需配置相应的服务器，通过 nginx + keepalived 实现高可用。<br />Ø  **缓存服务**：提升产品在部分查询场景的响应速度，产品默认采用 Redis 做为缓存服务，可统一使用企业提供的缓存服务，非必须部署模块。<br />Ø  **配置库**：存储标签库的相关元数据，如系统用户信息、系统权限信息、系统日志、标签目录信息、标签属性信息等元数据，聆鉴产品默认采用 PostgreSQL 数据库，也支持 mysql、oracle 等数据库，其中 oracle 需要客户提供相应的数据库，也可以直接使用企业提供的相应数据库服务。<br />Ø  **运算库：**用于进行标签的生成与存储、群体的计算与存储等内容，依赖于生成标签的源数据，即企业相应的业务数据，运算库在物理上可以单独部署但需要将相应的业务数据抽取至运算库中，会造成数据资源的重复存储，所以在常见的实践中运算库会直接在企业数据仓库/数据中台分析层上划分相应的数据平台账户与数据访问权限，即物理上是存在于企业的数据仓库/数据中台上。聆鉴产品运算库支持多种数据平台，包括：Oracle、HADOOP(Hive+Hbase+Impala)、Greenplum、GBase 8a、星环大数据平台、高斯 DB200、阿里云(maxcompute+ADS)、华为大数据平台等。
<a name="KCPYK"></a>

## 4.2  部署方式说明

产品支持线性扩展部署，可通过灵活地扩展服务器数量提升系统处理能力，满足不同的标签处理与应用需求，常见的部署架构有以下三种方式：
<a name="nG7rh"></a>

### 4.2.1  单机部署方式

![](<../../assets/images/(386).png#height=118&width=239>)<br /> [[优化5]](commonProblem/#优化5)<br />**部署内容：**单台服务器安装应用、数据库。<br />**适用场景：**验证产品功能或无须对接直接业务系统的场景。<br />**部署说明：**部署简单，支持并发数较小，不支持高可用。<br />**资源需求：**1 台应用服务器，CPU:4 核、内存：16G、存储：300G 以上。
<a name="sqiQ4"></a>

### 4.2.2  典型部署方式

![](<../../assets/images/(387).png#height=146&width=278>)<br />[[优化6]](commonProblem/#优化6) <br />**部署内容：**双应用服务器(集群)、单数据库节点、单软负载节点。<br />**适用场景：**对稳定性要求不是特别高，同时画像查询并发要求低于 500。<br />**部署说明：**整体架构较为稳定，投入较低，基本能满足日常的应用情况，但如果发生超大并发或数据库宕机，会影响正常使用。<br />**资源需求：**1 台数据库服务器：CPU:16 核、内存：64G、存储：500G 以上(按需)；<br />2 台应用服务器：CPU:8 核、内存：16G、存储：300G 以上；<br />1 台负载均衡服务器：CPU:8 核、内存：8G、存储：100G 以上。
<a name="oAqmC"></a>

### 4.2.3  推荐部署方式

![](<../../assets/images/(388).png#height=146&width=251>)<br />[[优化7]](commonProblem/#优化7) <br />**部署内容：**应用服务器集群（按并发要求扩展)、缓存服务器集群、数据库集群(数据平台)、软负载集群(硬负载)。<br />**适用场景：**与业务系统深度对接等对稳定性要求非常高的场景。<br />**部署说明：**部署复杂，并发能力较好，服务稳定，集群节点宕机不影响总体服务。<br />**资源配置[：**2 台数据库服务器以上：CPU:16 核、内存：64G、存储：1T 以上(按需)；<br />2 台应用服务器以上、CPU:8 核、内存：32G、存储：300G 以上；<br />2 台接口服务器以上：CPU: 16 核、内存：32G、存储：100G 以上；<br />2 台负载均衡服务器以上：CPU:8 核、内存：8G、存储：100G 以上；[[优化8]](commonProblem/8) 
<a name="fA9jY"></a>

## 4.3  部署指南

[[优化9]](commonProblem/#优化9) 
这里面要按照三种部署方式将部署指引写出来，可以先将单机、典型这两种方式先写出来，要将部署前准备的内容、然后怎样部署、怎样确认写出来。<br />要尽量简单易懂，要将目标用户看成是非常初级的部署人员，甚至是分析师。<br />产品部署兼容多种数据平台，常见有 MySQL、Oracle、PostgreSQL、Greenplum、Gbase8、SAP HANA、Gauss、Hadoop、星环大数据平台、阿里云大数据平台等。<br />产品部署的操作主要分为两部分操作，<br />1、数据库操作：准备产品系统运行所需的数据库环境；<br />2、产品系统配置：配置产品指向准备好的数据库环境。<br />因此部署只需两个步骤：<br />步骤一：执行数据库初始化脚本；<br />步骤二：填写应用中的数据源配置如数据库 ip、账号、密码等信息，启动应用。<br />等待应用启动完毕后，即可访问地址 http://IP:PORT/taglib 访问系统，登录超级管理员账号，上传证书激活系统，即可正常使用。
<a name="oqcHt"></a> -->
